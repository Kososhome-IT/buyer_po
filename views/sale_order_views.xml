<odoo>
<data>
  <record id="view_sale_order_form_custom" model="ir.ui.view">
    <field name="name">sale.order.form.custom</field>
    <field name="model">sale.order</field>
    <field name="inherit_id" ref="sale.view_order_form"/>
    <field name="arch" type="xml">
    <xpath expr="//div[@name='button_box']" position="inside">
    <!-- Hidden technical field -->
      <!-- <field name="inspection_count" invisible="1"/>

      <button type="object" name="action_view_inspections"
              class="oe_stat_button" icon="fa-ticket">
          <field name="inspection_count" widget="statinfo"/>
      </button> -->
    </xpath>
      <xpath expr="//field[@name='tag_ids']" position="after">

          <field name="cus_po_upload_no"/>
        
      </xpath>
      <xpath expr="//field[@name='partner_id']" position="after">
                    <field name="cus_po_issue_date"/>
                    <field name="cus_ex_fact_date"/>
                    <field name="cus_proforma_number"/>
                    <field name="cus_buyer_order_no"/>
                    <field name="country_origin"/>
                    <field name="l10n_in_gst_treatment"/>
      </xpath>
       <!-- Rename ALL labels for date_order -->
        <xpath expr="//label[@for='date_order']" position="attributes">
          <attribute name="string">Order Date</attribute>
        </xpath>
        <xpath expr="//field[@name='payment_term_id']" position="after">
          <field name="planning_days"/>
          <field name="rev_vendor_ex_date"/>
          <field name="vendor_id"/>
        </xpath>
    </field>
  </record>
  <!-- Inherit Sales Order / Quotation search view to add Vendor search -->
    <record id="view_sales_order_filter_inherit_vendor" model="ir.ui.view">
        <field name="name">sale.order.search.inherit.vendor</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_sales_order_filter"/>
        <field name="arch" type="xml">

            <!-- Add vendor in the search bar -->
            <xpath expr="//search" position="inside">
                <!-- Free-text search by Vendor name -->
                <field name="vendor_id"
                       string="Vendor"
                       filter_domain="[('vendor_id.name', 'ilike', self)]"/>

                <!-- Optional: Group by Vendor -->
                <filter name="group_by_vendor"
                        string="Vendor"
                        context="{'group_by': 'vendor_id'}"/>
                <!-- Add cus_buyer_order_no in the search bar -->        
                <field name="cus_buyer_order_no"
                       string="Buyer Order No"
                       filter_domain="[('cus_buyer_order_no.name', 'ilike', self)]"/>   
            </xpath>

        </field>
    </record>
  <!-- Inherit the Sale Order tree view -->
    <record id="view_order_tree_inherit_custom" model="ir.ui.view">
        <field name="name">sale.order.tree.inherit.custom</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_quotation_tree"/>
        <field name="arch" type="xml">

            <!-- Insert after the existing "name" column -->
            <xpath expr="//tree/field[@name='name']" position="after">
                <field name="cus_buyer_order_no"/>
                <field name="vendor_id"/>

            </xpath>

        </field>
    </record>
      <record id="sale_order_line_tree_inherit_custom" model="ir.ui.view">
        <field name="name">sale.order.line.tree.inherit.custom</field>
        <field name="model">sale.order.line</field>
        <field name="inherit_id" ref="sale.view_order_line_tree"/> <!-- Replace with actual view ID -->
          <field name="arch" type="xml">
        <xpath expr="//tree" position="attributes">
            <attribute name="create">true</attribute>
        </xpath>
    </field>
        
    </record>
  <record id="action_partner_vendors" model="ir.actions.act_window">
        <field name="name">Vendors</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('supplier_rank','>',0)]</field>
    </record>
<record id="action_sale_order_line_all" model="ir.actions.act_window">
    <field name="name">Sale Order Lines</field>
    <field name="res_model">sale.order.line</field>
     <field name="context">{'import_enabled': True}</field>
    <field name="view_mode">tree,form</field>
</record>
    <record id="action_sales_vendor_locations" model="ir.actions.act_window">
      <field name="name">Vendor Locations</field>
      <field name="res_model">res.partner</field>
      <field name="view_mode">tree,form,kanban</field>
      <field name="domain">[('supplier_rank','>',0)]</field>
    </record>
    <record id="action_library_country" model="ir.actions.act_window">
        <field name="name">Library Country</field>
        <field name="res_model">library.country</field>
        <field name="view_mode">tree,form</field>
        <field name="target">current</field>
    </record>
    <!-- Menu item under Sales / Orders -->
       
       <record id="sale.sale_menu_root" model="ir.ui.menu">
            <field name="name">Buyer PO</field>
        </record>
        <record id="sale.menu_sale_quotations" model="ir.ui.menu">
            <field name="name">Proforma Invoice</field>
        </record>
       <record id="sale.menu_sale_order" model="ir.ui.menu">
            <field name="name">Buyer PO</field>
        </record>
    <menuitem id="menu_sales_vendors_custom"
              name="Vendors"
              parent="sale.sale_order_menu"
              action="action_partner_vendors"
              sequence="45"/>
              <menuitem id="menu_sale_order_line_custom" name="Sale Order Lines" parent="sale.sale_order_menu" action="action_sale_order_line_all" sequence="99"/>
               <menuitem id="menu_sales_vendor_locations"
              name="Vendor Locations"
              parent="sale.sale_menu_root" 
              action="action_library_country"
              sequence="80"/>
              </data>
</odoo>
